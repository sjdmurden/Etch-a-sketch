<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Page Title</title>
    <link rel="stylesheet" type="text/css" href="etch2_style.css" />
  </head>
  <body>

    <h1>ETCH-A-SKETCH</h1>

    <div class="wrapper">
      <div id="container">
        <!-- CELLS -->
      </div>
    </div>

    <div id="number-of-cells"></div>

    <div id="btns_id" class="buttons">
      <!--
      <div class="slidecontainer">
        <input type="range" min="30" max="60" value="50" 
        class="slider" id="myRange">
        <p>Value: <span id="demo"></span></p>
      </div>
      -->
      <button id="colourBtn">DRAW</button>
      <button id="randomColBtn">RANDOM</button>
      <button id="eraseBtn">ERASER</button>
      <button id="clearGridBtn">CLEAR</button>
         
    </div>
   

    <script>

      
      
      let colour = document.getElementById("colourBtn");
      let erase = document.getElementById("eraseBtn");
      let clear = document.getElementById("clearGridBtn");
      let randomColour = document.getElementById("randomColBtn");

      let colouring = 2;
      colour.addEventListener("click", function onClick(e){
        colouring = 1;
      })
      erase.addEventListener("click", function onClick(e){
        colouring = 2;
      })
      randomColour.addEventListener("click", function onClick(e){
        colouring = 3;
      })

      /*
      let slider = document.getElementById("myRange");
      let output = document.getElementById("demo");
      output.innerHTML = slider.value;
      slider.oninput = function() {
        output.innerHTML = this.value;
      }
      slider.addEventListener("mouseup", function onClick(e){
        console.log("slider number: "+slider.value);
        console.log("slider: "+slider);
        console.log("output: "+output);
        //location.reload();
        createSliderGrid();
      })
      */

      function getRandomRgb() {
        let num = Math.round(0xffffff * Math.random());
        let r = num >> 16;
        let g = num >> 8 & 255;
        let b = num & 255;
        return 'rgb(' + r + ', ' + g + ', ' + b + ')';
      }

      let root = document.querySelector(':root');
      let rootStyles = getComputedStyle(root);
      let columns= rootStyles.getPropertyValue('--columns');
      console.log("columns: "+columns); 
      
      function createStartingGrid() {
        root.style.setProperty('--columns', '50');
        for (let i=0; i<50**2; i++){
          let cell = document.createElement("div");
          document.getElementById("container").appendChild(cell);
          cell.id = "cell";
          cell.setAttribute("style", "background:white");
          //document.getElementById("container").setAttribute("style", "grid-template-columns: repeat(50,auto);")
          cell.addEventListener("mouseover", function onClick(e){
            if (colouring == 1){
              cell.style.background = "black";
            } else if (colouring == 2){
              cell.style.background = "white";
            } else if(colouring == 3){
              cell.style.background = getRandomRgb();
            }
          });  
          clear.addEventListener("click", function onClick(e){
            cell.style.background = "white";
            colouring = 2;
          })
        } 
      } 
      createStartingGrid();

      

      function createSliderGrid() {       
        for (let i=0; i<(slider.value)**2; i++){
          let cell = document.createElement("div");
          document.getElementById("container").appendChild(cell);
          cell.id = "cell";
          cell.setAttribute("style", "background:white");
          document.getElementById("container").setAttribute("style", "grid-template-columns: repeat(--columns, --columns);")
          cell.addEventListener("mouseover", function onClick(e){
            if (colouring == 1){
              cell.style.background = "black";
            } else if (colouring == 2){
              cell.style.background = "white";
            } else if(colouring == 3){
              cell.style.background = getRandomRgb();
            }
          });  
          clear.addEventListener("click", function onClick(e){
            cell.style.background = "white";
            colouring = 2;
          })
        } 
      } 

        
      

    </script>




  </body>
</html>

<!--
  Run function to create starting grid of 50x50 on page load.
  When mouseup on slider, clear grid.
  And run function creating a 'value x value' grid
  Function must change columns styling.

-->